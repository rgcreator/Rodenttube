<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rodenttube</title>
  <link rel="stylesheet" href="code/bootstrap.min.css">
  <script src="code/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="layout.css">
</head>
	     <body>
        <img src="images/rodenttube banner.png" class="col-12 d-lg-none" style="height: 125px;" alt="logo">
        <img src="images/rodenttube banner bs.png" class="d-none d-lg-block col-lg-6" style="height: 125px;" alt="logo">
        <img src="images/fcknaagdierlogo.jpg	" alt="logo" width="100" height="100">
        <div style="background-color: #654321;">
        <p style="text-align: center; font-weight: bold; font-size: 30px;" id="title"></p>
        <p style="text-align: center; font-weight:  bold; font-size: 30px;" id="author"></p>
        </div>
    <div id="song-box" >
      <br>
      <audio id="audio" controls="controls" autoplay>
<source id="audioSource" src=""></source>
Your browser does not support the audio format.
</audio>
      
      <div class="links">
          <button id="new-song">Volgende</a>
      </div>
  </div> 
<script>
    
 	
let newsong = document.getElementById('new-song');


let songbox = document.getElementById('song-box');

function setup() {
  fetch('code/nummers.json')
    .then(response => response.json())
    .then(data => {
      function getRandomsong() {
        
        const randomIdx = parseInt(Math.random() * data.length);
        const { file, author, title} = data[randomIdx];
        
        setTimeout(() => {
          document.getElementById('title').innerHTML = `${title}`;
          document.getElementById('author').innerHTML = `-${author}`;
          let audio = document.getElementById('audio');
          audio.src= `${file}`;
          audio.load();          
        })
      }
    
      newsong.addEventListener('click', getRandomsong);
      document.getElementById('audio').addEventListener('ended', getRandomsong);
    
      getRandomsong();
    }).catch(error => console.log(error.message))
}

//Load on run
document.addEventListener('DOMContentLoaded', setup); 
  </script>
  </body>
</html>